import request from"../../utils/request";Page({data:{phone:"",password:""},onLoad:function(options){},handleInput(event){let type=event.currentTarget.dataset.type;this.setData({[type]:event.detail.value})},async login(){let{phone:phone,password:password}=this.data,phoneReg;if(!phone)return void wx.showToast({title:"手机号不能为空",icon:"none"});if(!/^1(3|4|5|6|7|8|9)\d{9}$/.test(phone))return void wx.showToast({title:"手机号格式错误",icon:"none"});if(!password)return void wx.showToast({title:"密码不能为空",icon:"none"});let result=await request("/login/cellphone",{phone:phone,password:password,isLogin:!0});200===result.code?(wx.showToast({title:"登录成功"}),wx.setStorageSync("userInfo",JSON.stringify(result.profile)),wx.reLaunch({url:"/pages/personal/personal"})):400===result.code?wx.showToast({title:"手机号错误",icon:"none"}):502===result.code?wx.showToast({title:"密码错误",icon:"none"}):wx.showToast({title:"登录失败，请重新登录",icon:"none"})},onReady:function(){},onShow:function(){},onHide:function(){},onUnload:function(){},onPullDownRefresh:function(){},onReachBottom:function(){},onShareAppMessage:function(){}});